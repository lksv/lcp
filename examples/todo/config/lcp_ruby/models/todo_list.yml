model:
  name: todo_list
  label: "Todo List"
  label_plural: "Todo Lists"

  fields:
    - name: title
      type: string
      label: "Title"
      transforms: [strip]
      column_options:
        limit: 255
        "null": false
      validations:
        - type: presence
        - type: length
          options: { minimum: 1, maximum: 255 }

    - name: description
      type: text
      label: "Description"

    - name: cover_image
      type: attachment
      label: "Cover Image"
      options:
        accept: "image/*"
        max_size: 5MB
        content_types: [image/jpeg, image/png, image/webp]
        variants:
          thumbnail: { resize_to_fill: [80, 80] }
          medium: { resize_to_limit: [400, 300] }

  associations:
    - type: has_many
      name: todo_items
      target_model: todo_item
      foreign_key: todo_list_id
      dependent: destroy
      inverse_of: todo_list
      order:
        position: asc
      nested_attributes:
        allow_destroy: true
        reject_if: all_blank

  options:
    timestamps: true
    label_method: title
