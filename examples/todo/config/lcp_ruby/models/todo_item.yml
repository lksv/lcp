model:
  name: todo_item
  label: "Todo Item"
  label_plural: "Todo Items"

  fields:
    - name: title
      type: string
      label: "Title"
      transforms: [strip]
      column_options:
        limit: 255
        "null": false
      validations:
        - type: presence

    - name: completed
      type: boolean
      label: "Completed"
      default: false

    - name: start_date
      type: date
      label: "Start Date"
      default: current_date

    - name: due_date
      type: date
      label: "Due Date"
      default:
        service: one_week_from_now
      validations:
        - type: comparison
          operator: gte
          field_ref: start_date
          message: "must be on or after start date"
        - type: presence
          when:
            field: completed
            operator: eq
            value: "false"

    - name: position
      type: integer
      label: "Position"

    - name: attachment
      type: attachment
      label: "Attachment"
      options:
        max_size: 10MB

  associations:
    - type: belongs_to
      name: todo_list
      target_model: todo_list
      foreign_key: todo_list_id
      required: true
      inverse_of: todo_items

  positioning:
    field: position
    scope: todo_list_id

  options:
    timestamps: true
    label_method: title
