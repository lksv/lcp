presenter:
  name: deal_admin
  model: deal
  label: "Deals"
  slug: deals
  icon: dollar-sign

  index:
    default_view: table
    default_sort: { field: created_at, direction: desc }
    per_page: 25
    table_columns:
      - { field: title, width: "30%", link_to: show, sortable: true }
      - { field: stage, width: "20%", display: badge, sortable: true }
      - { field: value, width: "20%", display: currency, sortable: true }

  show:
    layout:
      - section: "Deal Information"
        columns: 2
        fields:
          - { field: title, display: heading }
          - { field: stage, display: badge }
          - { field: value, display: currency }

  form:
    sections:
      - title: "Deal Details"
        columns: 2
        fields:
          - { field: title, placeholder: "Deal title...", autofocus: true }
          - { field: stage, input_type: select }
          - { field: value, input_type: number }
          - { field: company_id, input_type: association_select }
          - { field: contact_id, input_type: association_select }

  search:
    enabled: true
    searchable_fields: [title]
    placeholder: "Search deals..."
    predefined_filters:
      - { name: all, label: "All", default: true }
      - { name: open, label: "Open", scope: open_deals }
      - { name: won, label: "Won", scope: won }
      - { name: lost, label: "Lost", scope: lost }

  actions:
    collection:
      - { name: create, type: built_in, label: "New Deal", icon: plus }
    single:
      - { name: show, type: built_in, icon: eye }
      - { name: edit, type: built_in, icon: pencil }
      - name: close_won
        type: custom
        label: "Close as Won"
        icon: check-circle
        confirm: true
        confirm_message: "Mark this deal as won?"
        visible_when: { field: stage, operator: not_in, value: [closed_won, closed_lost] }
      - { name: destroy, type: built_in, icon: trash, confirm: true, style: danger }

  navigation:
    menu: main
    position: 3
