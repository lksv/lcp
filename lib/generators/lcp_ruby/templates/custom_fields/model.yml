model:
  name: custom_field_definition
  table_name: custom_field_definitions
  label: "Custom Field Definition"
  label_plural: "Custom Field Definitions"

  options:
    timestamps: true
    label_method: label

  fields:
    - name: target_model
      type: string
      validations:
        - type: presence

    - name: field_name
      type: string
      validations:
        - type: presence
        - type: format
          options:
            with: "\\A[a-z][a-z0-9_]*\\z"
          message: "must start with a lowercase letter and contain only lowercase letters, digits, and underscores"

    - name: custom_type
      type: string
      default: "string"
      validations:
        - type: presence
        - type: inclusion
          options:
            in: [string, text, integer, float, decimal, boolean, date, datetime, enum]

    - name: label
      type: string
      validations:
        - type: presence

    - name: description
      type: text

    - name: section
      type: string
      default: "Custom Fields"

    - name: position
      type: integer
      default: 0

    - name: active
      type: boolean
      default: true

    - name: required
      type: boolean
      default: false

    - name: default_value
      type: string

    - name: placeholder
      type: string

    - name: min_length
      type: integer

    - name: max_length
      type: integer

    - name: min_value
      type: decimal
      column_options:
        precision: 15
        scale: 4

    - name: max_value
      type: decimal
      column_options:
        precision: 15
        scale: 4

    - name: precision
      type: integer

    - name: enum_values
      type: json

    - name: show_in_table
      type: boolean
      default: false

    - name: show_in_form
      type: boolean
      default: true

    - name: show_in_show
      type: boolean
      default: true

    - name: sortable
      type: boolean
      default: false

    - name: searchable
      type: boolean
      default: false

    - name: input_type
      type: string

    - name: renderer
      type: string

    - name: renderer_options
      type: json

    - name: column_width
      type: string

    - name: extra_validations
      type: json

    - name: readable_by_roles
      type: json

    - name: writable_by_roles
      type: json

  validations:
    - type: uniqueness
      field: field_name
      options:
        scope: target_model
      message: "has already been taken for this target model"
